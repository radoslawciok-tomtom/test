<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="507px" preserveAspectRatio="none" style="width:974px;height:507px;background:#FFFFFF;" version="1.1" viewBox="0 0 974 507" width="974px" zoomAndPan="magnify"><defs><filter height="300%" id="f1iueid8wglkxs" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1iueid8wglkxs)" height="318.4609" style="stroke:#000000;stroke-width:2.0;" width="950" x="10" y="128.5625"/><rect fill="#FFFFFF" filter="url(#f1iueid8wglkxs)" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="473.5" x="30" y="152.6953"/><rect fill="#FFFFFF" filter="url(#f1iueid8wglkxs)" height="195.9297" style="stroke:#000000;stroke-width:2.0;" width="930" x="20" y="212.9609"/><rect fill="#FFFFFF" height="149.6641" style="stroke:none;stroke-width:1.0;" width="930" x="20" y="259.2266"/><rect fill="#FFFFFF" filter="url(#f1iueid8wglkxs)" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="473.5" x="30" y="268.2266"/><rect fill="#FFFFFF" height="31.1328" style="stroke:none;stroke-width:1.0;" width="950" x="10" y="415.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="69" x2="69" y1="40.2969" y2="464.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="409.5" x2="409.5" y1="40.2969" y2="464.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="842" x2="842" y1="40.2969" y2="464.0234"/><rect fill="#FEFECE" filter="url(#f1iueid8wglkxs)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="55" x="40" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="47" y="24.9951">Client</text><rect fill="#FEFECE" filter="url(#f1iueid8wglkxs)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="55" x="40" y="463.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="47" y="483.0186">Client</text><rect fill="#FEFECE" filter="url(#f1iueid8wglkxs)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="164" x="325.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="332.5" y="24.9951">CompressionHandler</text><rect fill="#FEFECE" filter="url(#f1iueid8wglkxs)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="164" x="325.5" y="463.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="332.5" y="483.0186">CompressionHandler</text><rect fill="#FEFECE" filter="url(#f1iueid8wglkxs)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="191" x="745" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="752" y="24.9951">JpegCompressionService</text><rect fill="#FEFECE" filter="url(#f1iueid8wglkxs)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="191" x="745" y="463.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="752" y="483.0186">JpegCompressionService</text><polygon fill="#A80036" points="397.5,67.4297,407.5,71.4297,397.5,75.4297,401.5,71.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="69.5" x2="403.5" y1="71.4297" y2="71.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="76.5" y="66.3638">compress(format, qualityLevel, [inputResource])</text><line style="stroke:#A80036;stroke-width:1.0;" x1="409.5" x2="451.5" y1="100.5625" y2="100.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="451.5" x2="451.5" y1="100.5625" y2="113.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="410.5" x2="451.5" y1="113.5625" y2="113.5625"/><polygon fill="#A80036" points="420.5,109.5625,410.5,113.5625,420.5,117.5625,416.5,113.5625" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="416.5" y="95.4966">get effective quality level</text><path d="M10,128.5625 L74,128.5625 L74,135.5625 L64,145.5625 L10,145.5625 L10,128.5625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="318.4609" style="stroke:#000000;stroke-width:2.0;" width="950" x="10" y="128.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="141.6294">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="178" x="89" y="140.7729">[[inputResource] is not null]</text><path d="M30,152.6953 L94,152.6953 L94,159.6953 L84,169.6953 L30,169.6953 L30,152.6953 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="473.5" x="30" y="152.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="45" y="165.7622">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="351" x="109" y="164.9058">[qualityLevel &lt; 0 || qualityLevel &gt; MAX_QUALITY_LEVEL]</text><polygon fill="#A80036" points="80.5,186.9609,70.5,190.9609,80.5,194.9609,76.5,190.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="408.5" y1="190.9609" y2="190.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="86.5" y="185.895">throw InvalidQualityLevelException</text><path d="M20,212.9609 L84,212.9609 L84,219.9609 L74,229.9609 L20,229.9609 L20,212.9609 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="195.9297" style="stroke:#000000;stroke-width:2.0;" width="930" x="20" y="212.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="35" y="226.0278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="456" x="99" y="225.1714">[effectiveQualityLevel = MAX_QUALITY_LEVEL OR [inputResource] = null]</text><polygon fill="#A80036" points="80.5,247.2266,70.5,251.2266,80.5,255.2266,76.5,251.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="408.5" y1="251.2266" y2="251.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="86.5" y="246.1606">[inputResource]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="950" y1="260.2266" y2="260.2266"/><path d="M30,268.2266 L94,268.2266 L94,275.2266 L84,285.2266 L30,285.2266 L30,268.2266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:2.0;" width="473.5" x="30" y="268.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="45" y="281.2935">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="355" x="109" y="280.437">[no compression service configured for resource format]</text><polygon fill="#A80036" points="80.5,302.4922,70.5,306.4922,80.5,310.4922,76.5,306.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="408.5" y1="306.4922" y2="306.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="86.5" y="301.4263">throw FormatNotSupportedException</text><polygon fill="#A80036" points="830.5,338.625,840.5,342.625,830.5,346.625,834.5,342.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="409.5" x2="836.5" y1="342.625" y2="342.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="409" x="416.5" y="337.5591">compress(Resource [inputResource], int effectiveQualityLevel)</text><polygon fill="#A80036" points="420.5,367.7578,410.5,371.7578,420.5,375.7578,416.5,371.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="414.5" x2="841.5" y1="371.7578" y2="371.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="426.5" y="366.6919">[compressedResource]</text><polygon fill="#A80036" points="80.5,396.8906,70.5,400.8906,80.5,404.8906,76.5,400.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="408.5" y1="400.8906" y2="400.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="86.5" y="395.8247">[compressedResource]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="960" y1="416.8906" y2="416.8906"/><polygon fill="#A80036" points="80.5,435.0234,70.5,439.0234,80.5,443.0234,76.5,439.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="408.5" y1="439.0234" y2="439.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="86.5" y="433.9575">null: Resource</text><!--MD5=[b01ecc058b1402d1ae57ac8218a48e07]
@startuml CompressionHandler.compress

!$inputResource = "[inputResource]"
!$compressedResource = "[compressedResource]"

Client -> CompressionHandler: compress(format, qualityLevel, $inputResource)

CompressionHandler -> CompressionHandler: get effective quality level

alt $inputResource is not null

    alt qualityLevel < 0 || qualityLevel > MAX_QUALITY_LEVEL
        CompressionHandler - -> Client: throw InvalidQualityLevelException
    end

    alt effectiveQualityLevel = MAX_QUALITY_LEVEL OR $inputResource = null
        CompressionHandler - -> Client: $inputResource
    else
        alt no compression service configured for resource format
            CompressionHandler - -> Client: throw FormatNotSupportedException
        end
        CompressionHandler -> JpegCompressionService: compress(Resource $inputResource, int effectiveQualityLevel)
        JpegCompressionService - -> CompressionHandler: $compressedResource
        CompressionHandler - -> Client: $compressedResource
    end

else
    CompressionHandler - -> Client: null: Resource
end

@enduml

@startuml CompressionHandler.compress


Client -> CompressionHandler: compress(format, qualityLevel, [inputResource])

CompressionHandler -> CompressionHandler: get effective quality level

alt [inputResource] is not null

    alt qualityLevel < 0 || qualityLevel > MAX_QUALITY_LEVEL
        CompressionHandler - -> Client: throw InvalidQualityLevelException
    end

    alt effectiveQualityLevel = MAX_QUALITY_LEVEL OR [inputResource] = null
        CompressionHandler - -> Client: [inputResource]
    else
        alt no compression service configured for resource format
            CompressionHandler - -> Client: throw FormatNotSupportedException
        end
        CompressionHandler -> JpegCompressionService: compress(Resource [inputResource], int effectiveQualityLevel)
        JpegCompressionService - -> CompressionHandler: [compressedResource]
        CompressionHandler - -> Client: [compressedResource]
    end

else
    CompressionHandler - -> Client: null: Resource
end

@enduml

PlantUML version 1.2022.1(Tue Feb 01 19:19:58 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>