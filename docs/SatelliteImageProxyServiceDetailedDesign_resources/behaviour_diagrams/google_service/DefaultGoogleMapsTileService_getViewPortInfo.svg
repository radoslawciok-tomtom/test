<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="412.8px" preserveAspectRatio="none" style="width:1424px;height:412px;background:#FFFFFF;" version="1.1" viewBox="0 0 1424 412" width="1424px" zoomAndPan="magnify"><defs><filter height="300%" id="fmdgeemumbdpw" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.6000000000000003"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="3.2000000000000006" dy="3.2000000000000006" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fmdgeemumbdpw)" height="107.3125" style="stroke:#000000;stroke-width:1.6000000000000003;" width="434.8" x="835.2" y="161.5688"/><rect fill="#FFFFFF" height="35.15" style="stroke:none;stroke-width:0.8000000000000002;" width="434.8" x="835.2" y="198.5813"/><rect fill="#FFFFFF" height="35.15" style="stroke:none;stroke-width:0.8000000000000002;" width="434.8" x="835.2" y="233.7313"/><rect fill="#FFFFFF" filter="url(#fmdgeemumbdpw)" height="61.9188" style="stroke:#000000;stroke-width:1.6000000000000003;" width="448" x="8" y="303.3875"/><rect fill="#FFFFFF" height="24.9063" style="stroke:none;stroke-width:0.8000000000000002;" width="448" x="8" y="340.4"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:5.0,5.0;" x1="39.2" x2="39.2" y1="32.2375" y2="378.9063"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:5.0,5.0;" x1="352.8" x2="352.8" y1="32.2375" y2="378.9063"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:5.0,5.0;" x1="879.2" x2="879.2" y1="32.2375" y2="378.9063"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:5.0,5.0;" x1="1225.2" x2="1225.2" y1="32.2375" y2="378.9063"/><rect fill="#FEFECE" filter="url(#fmdgeemumbdpw)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="44" x="16" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="32.8" x="21.6" y="19.9961">Client</text><rect fill="#FEFECE" filter="url(#fmdgeemumbdpw)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="44" x="16" y="378.1063"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="32.8" x="21.6" y="394.1023">Client</text><rect fill="#FEFECE" filter="url(#fmdgeemumbdpw)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="186.4" x="258.4" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="175.2" x="264" y="19.9961">DefaultGoogleMapsTileService</text><rect fill="#FEFECE" filter="url(#fmdgeemumbdpw)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="186.4" x="258.4" y="378.1063"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="175.2" x="264" y="394.1023">DefaultGoogleMapsTileService</text><rect fill="#FEFECE" filter="url(#fmdgeemumbdpw)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="69.6" x="843.2" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="58.4" x="848.8" y="19.9961">WebClient</text><rect fill="#FEFECE" filter="url(#fmdgeemumbdpw)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="69.6" x="843.2" y="378.1063"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="58.4" x="848.8" y="394.1023">WebClient</text><rect fill="#FEFECE" filter="url(#fmdgeemumbdpw)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="70.4" x="1188.4" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="59.2" x="1194" y="19.9961">GoogleApi</text><rect fill="#FEFECE" filter="url(#fmdgeemumbdpw)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="70.4" x="1188.4" y="378.1063"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="59.2" x="1194" y="394.1023">GoogleApi</text><polygon fill="#A80036" points="343.6,53.9438,351.6,57.1438,343.6,60.3438,346.8,57.1438" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;" x1="39.6" x2="348.4" y1="57.1438" y2="57.1438"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="294.4" x="45.2" y="53.091">getViewPortInfo(viewPort, ifNoneMatch, [sessionToken])</text><polygon fill="#A80036" points="870,77.25,878,80.45,870,83.65,873.2,80.45" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;" x1="353.2" x2="874.8" y1="80.45" y2="80.45"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="507.2" x="358.8" y="76.3973">Make http request to google: GET /viewport with: geographic coordinates, [sessionToken], apiKey</text><polygon fill="#A80036" points="1215.6,100.5563,1223.6,103.7563,1215.6,106.9563,1218.8,103.7563" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;" x1="879.6" x2="1220.4" y1="103.7563" y2="103.7563"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="76.8" x="885.2" y="99.7035">request for tile</text><line style="stroke:#A80036;stroke-width:0.8000000000000002;" x1="1225.2" x2="1258.8" y1="139.1688" y2="139.1688"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;" x1="1258.8" x2="1258.8" y1="139.1688" y2="149.5688"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;" x1="1226" x2="1258.8" y1="149.5688" y2="149.5688"/><polygon fill="#A80036" points="1234,146.3688,1226,149.5688,1234,152.7688,1230.8,149.5688" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="188" x="1230.8" y="123.0098">checks if tile was already requested</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="170.4" x="1230.8" y="135.116">and if it was modified since then</text><path d="M835.2,161.5688 L886.4,161.5688 L886.4,167.1688 L878.4,175.1688 L835.2,175.1688 L835.2,161.5688 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.8000000000000002;"/><rect fill="none" height="107.3125" style="stroke:#000000;stroke-width:1.6000000000000003;" width="434.8" x="835.2" y="161.5688"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="15.2" x="847.2" y="172.0223">alt</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacing" textLength="188" x="898.4" y="171.3371">[Tile was modified since last request]</text><polygon fill="#A80036" points="888.4,188.9813,880.4,192.1813,888.4,195.3813,885.2,192.1813" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="883.6" x2="1224.4" y1="192.1813" y2="192.1813"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="326.4" x="893.2" y="188.1285">New or modified tile resource, status_code = 200, status = OK</text><line style="stroke:#000000;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="835.2" x2="1270" y1="199.3813" y2="199.3813"/><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacing" textLength="208" x="839.2" y="207.5496">[Tile was not modified since last request]</text><polygon fill="#A80036" points="888.4,224.1313,880.4,227.3313,888.4,230.5313,885.2,227.3313" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="883.6" x2="1224.4" y1="227.3313" y2="227.3313"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="242.4" x="893.2" y="223.2785">status_code = 304 - not modified, status = OK</text><line style="stroke:#000000;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="835.2" x2="1270" y1="234.5313" y2="234.5313"/><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacing" textLength="208.8" x="839.2" y="242.6996">[Tile not found or service not accessable]</text><polygon fill="#A80036" points="888.4,259.2813,880.4,262.4813,888.4,265.6813,885.2,262.4813" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="883.6" x2="1224.4" y1="262.4813" y2="262.4813"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="263.2" x="893.2" y="258.4285">error: WebClientResponseException, status = NOK</text><polygon fill="#A80036" points="362,288.1875,354,291.3875,362,294.5875,358.8,291.3875" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="357.2" x2="878.8" y1="291.3875" y2="291.3875"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="108" x="366.8" y="287.3348">[Tile HTTP response]</text><path d="M8,303.3875 L59.2,303.3875 L59.2,308.9875 L51.2,316.9875 L8,316.9875 L8,303.3875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.8000000000000002;"/><rect fill="none" height="61.9188" style="stroke:#000000;stroke-width:1.6000000000000003;" width="448" x="8" y="303.3875"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="15.2" x="20" y="313.841">alt</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacing" textLength="175.2" x="71.2" y="313.1559">[[Tile HTTP response] status = OK]</text><polygon fill="#A80036" points="48.4,330.8,40.4,334,48.4,337.2,45.2,334" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="43.6" x2="352.4" y1="334" y2="334"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="108" x="53.2" y="329.9473">[Tile HTTP response]</text><line style="stroke:#000000;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="8" x2="456" y1="341.2" y2="341.2"/><polygon fill="#A80036" points="48.4,355.7063,40.4,358.9063,48.4,362.1063,45.2,358.9063" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="43.6" x2="352.4" y1="358.9063" y2="358.9063"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="186.4" x="53.2" y="354.8535">error: WebClientResponseException</text><!--MD5=[a4746dce512be7325113cd55b297ea10]
@startuml
'https://plantuml.com/sequence-diagram

!$sessionToken = "[sessionToken]"
!$tile_http_resp = "[Tile HTTP response]"

Client -> DefaultGoogleMapsTileService: getViewPortInfo(viewPort, ifNoneMatch, $sessionToken)
DefaultGoogleMapsTileService -> WebClient: Make http request to google: GET /viewport with: geographic coordinates, $sessionToken, apiKey
WebClient -> GoogleApi: request for tile

GoogleApi -> GoogleApi: checks if tile was already requested\nand if it was modified since then

alt Tile was modified since last request
    GoogleApi - -> WebClient: New or modified tile resource, status_code = 200, status = OK
else Tile was not modified since last request
    GoogleApi - -> WebClient: status_code = 304 - not modified, status = OK
else Tile not found or service not accessable
    GoogleApi - -> WebClient: error: WebClientResponseException, status = NOK
end

WebClient - -> DefaultGoogleMapsTileService: $tile_http_resp

alt $tile_http_resp status = OK
    DefaultGoogleMapsTileService - -> Client: $tile_http_resp
else
    DefaultGoogleMapsTileService - -> Client: error: WebClientResponseException
end


@enduml

@startuml


Client -> DefaultGoogleMapsTileService: getViewPortInfo(viewPort, ifNoneMatch, [sessionToken])
DefaultGoogleMapsTileService -> WebClient: Make http request to google: GET /viewport with: geographic coordinates, [sessionToken], apiKey
WebClient -> GoogleApi: request for tile

GoogleApi -> GoogleApi: checks if tile was already requested\nand if it was modified since then

alt Tile was modified since last request
    GoogleApi - -> WebClient: New or modified tile resource, status_code = 200, status = OK
else Tile was not modified since last request
    GoogleApi - -> WebClient: status_code = 304 - not modified, status = OK
else Tile not found or service not accessable
    GoogleApi - -> WebClient: error: WebClientResponseException, status = NOK
end

WebClient - -> DefaultGoogleMapsTileService: [Tile HTTP response]

alt [Tile HTTP response] status = OK
    DefaultGoogleMapsTileService - -> Client: [Tile HTTP response]
else
    DefaultGoogleMapsTileService - -> Client: error: WebClientResponseException
end


@enduml

PlantUML version 1.2022.1(Tue Feb 01 19:19:58 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>