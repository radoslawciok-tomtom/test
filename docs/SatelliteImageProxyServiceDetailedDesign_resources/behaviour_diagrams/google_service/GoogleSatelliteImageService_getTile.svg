<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="411.2px" preserveAspectRatio="none" style="width:813px;height:411px;background:#FFFFFF;" version="1.1" viewBox="0 0 813 411" width="813.6px" zoomAndPan="magnify"><defs><filter height="300%" id="f1bpt9ye975t7u" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.6000000000000003"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="3.2000000000000006" dy="3.2000000000000006" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1bpt9ye975t7u)" height="166.9875" style="stroke:#000000;stroke-width:1.6000000000000003;" width="794.4" x="8" y="196.075"/><rect fill="#FFFFFF" height="129.975" style="stroke:none;stroke-width:0.8000000000000002;" width="794.4" x="8" y="233.0875"/><rect fill="#FFFFFF" filter="url(#f1bpt9ye975t7u)" height="37.0125" style="stroke:#000000;stroke-width:1.6000000000000003;" width="636.8" x="63.2" y="250.5313"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:5.0,5.0;" x1="39.2" x2="39.2" y1="32.2375" y2="376.6625"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:5.0,5.0;" x1="160.8" x2="160.8" y1="32.2375" y2="376.6625"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:5.0,5.0;" x1="333.6" x2="333.6" y1="32.2375" y2="376.6625"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:5.0,5.0;" x1="489.6" x2="489.6" y1="32.2375" y2="376.6625"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:5.0,5.0;" x1="632" x2="632" y1="32.2375" y2="376.6625"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:5.0,5.0;" x1="747.2" x2="747.2" y1="32.2375" y2="376.6625"/><rect fill="#FEFECE" filter="url(#f1bpt9ye975t7u)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="44" x="16" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="32.8" x="21.6" y="19.9961">Client</text><rect fill="#FEFECE" filter="url(#f1bpt9ye975t7u)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="44" x="16" y="375.8625"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="32.8" x="21.6" y="391.8586">Client</text><rect fill="#FEFECE" filter="url(#f1bpt9ye975t7u)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="176.8" x="71.2" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="165.6" x="76.8" y="19.9961">GoogleSatelliteImageService</text><rect fill="#FEFECE" filter="url(#f1bpt9ye975t7u)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="176.8" x="71.2" y="375.8625"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="165.6" x="76.8" y="391.8586">GoogleSatelliteImageService</text><rect fill="#FEFECE" filter="url(#f1bpt9ye975t7u)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="145.6" x="259.2" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="134.4" x="264.8" y="19.9961">SessionContextProvider</text><rect fill="#FEFECE" filter="url(#f1bpt9ye975t7u)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="145.6" x="259.2" y="375.8625"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="134.4" x="264.8" y="391.8586">SessionContextProvider</text><rect fill="#FEFECE" filter="url(#f1bpt9ye975t7u)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="144.8" x="416" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="133.6" x="421.6" y="19.9961">GoogleMapsTileService</text><rect fill="#FEFECE" filter="url(#f1bpt9ye975t7u)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="144.8" x="416" y="375.8625"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="133.6" x="421.6" y="391.8586">GoogleMapsTileService</text><rect fill="#FEFECE" filter="url(#f1bpt9ye975t7u)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="116.8" x="572" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="105.6" x="577.6" y="19.9961">NoTileAreaService</text><rect fill="#FEFECE" filter="url(#f1bpt9ye975t7u)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="116.8" x="572" y="375.8625"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="105.6" x="577.6" y="391.8586">NoTileAreaService</text><rect fill="#FEFECE" filter="url(#f1bpt9ye975t7u)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="91.2" x="700" y="4"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="80" x="705.6" y="19.9961">ExceptionUtils</text><rect fill="#FEFECE" filter="url(#f1bpt9ye975t7u)" height="24.2375" style="stroke:#A80036;stroke-width:1.2000000000000002;" width="91.2" x="700" y="375.8625"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="80" x="705.6" y="391.8586">ExceptionUtils</text><polygon fill="#A80036" points="151.6,53.9438,159.6,57.1438,151.6,60.3438,154.8,57.1438" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;" x1="39.6" x2="156.4" y1="57.1438" y2="57.1438"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="7.2" x="45.2" y="53.091">1</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="36" x="55.6" y="53.091">getTile</text><polygon fill="#A80036" points="324,77.25,332,80.45,324,83.65,327.2,80.45" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;" x1="161.2" x2="328.8" y1="80.45" y2="80.45"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="7.2" x="166.8" y="76.3973">2</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="130.4" x="177.2" y="76.3973">get google session token</text><polygon fill="#A80036" points="170,100.5563,162,103.7563,170,106.9563,166.8,103.7563" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="165.2" x2="332.8" y1="103.7563" y2="103.7563"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="7.2" x="174.8" y="99.7035">3</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="29.6" x="185.2" y="99.7035">token</text><polygon fill="#A80036" points="480.4,123.8625,488.4,127.0625,480.4,130.2625,483.6,127.0625" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;" x1="161.2" x2="485.2" y1="127.0625" y2="127.0625"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="7.2" x="166.8" y="123.0098">4</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="36" x="177.2" y="123.0098">getTile</text><line style="stroke:#A80036;stroke-width:0.8000000000000002;" x1="490" x2="523.6" y1="150.3688" y2="150.3688"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;" x1="523.6" x2="523.6" y1="150.3688" y2="160.7688"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;" x1="490.8" x2="523.6" y1="160.7688" y2="160.7688"/><polygon fill="#A80036" points="498.8,157.5688,490.8,160.7688,498.8,163.9688,495.6,160.7688" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="7.2" x="495.6" y="146.316">5</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="116" x="506" y="146.316">call Google Api for tile</text><polygon fill="#A80036" points="170,180.875,162,184.075,170,187.275,166.8,184.075" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="165.2" x2="489.2" y1="184.075" y2="184.075"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="7.2" x="174.8" y="180.0223">6</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="180.8" x="185.2" y="180.0223">Google Api response = tile or error</text><path d="M8,196.075 L59.2,196.075 L59.2,201.675 L51.2,209.675 L8,209.675 L8,196.075 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.8000000000000002;"/><rect fill="none" height="166.9875" style="stroke:#000000;stroke-width:1.6000000000000003;" width="794.4" x="8" y="196.075"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="15.2" x="20" y="206.5285">alt</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacing" textLength="221.6" x="71.2" y="205.8434">[Google Api respond with tile (status = OK)]</text><polygon fill="#A80036" points="48.4,223.4875,40.4,226.6875,48.4,229.8875,45.2,226.6875" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="43.6" x2="160.4" y1="226.6875" y2="226.6875"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="7.2" x="53.2" y="222.6348">7</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="16.8" x="63.6" y="222.6348">tile</text><line style="stroke:#000000;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="8" x2="802.4" y1="233.8875" y2="233.8875"/><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacing" textLength="159.2" x="12" y="242.0559">[Google Api respond with error]</text><path d="M63.2,250.5313 L114.4,250.5313 L114.4,256.1313 L106.4,264.1313 L63.2,264.1313 L63.2,250.5313 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.8000000000000002;"/><rect fill="none" height="37.0125" style="stroke:#000000;stroke-width:1.6000000000000003;" width="636.8" x="63.2" y="250.5313"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="15.2" x="75.2" y="260.9848">alt</text><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacing" textLength="180.8" x="126.4" y="260.2996">[tile not found (status_code = 404)]</text><polygon fill="#A80036" points="622.4,277.9438,630.4,281.1438,622.4,284.3438,625.6,281.1438" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;" x1="161.2" x2="627.2" y1="281.1438" y2="281.1438"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="7.2" x="166.8" y="277.091">8</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="96.8" x="177.2" y="277.091">cache not tile area</text><polygon fill="#A80036" points="737.6,306.85,745.6,310.05,737.6,313.25,740.8,310.05" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;" x1="161.2" x2="742.4" y1="310.05" y2="310.05"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="7.2" x="166.8" y="305.9973">9</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="222.4" x="177.2" y="305.9973">map error from Google api to SipException</text><polygon fill="#A80036" points="170,330.1563,162,333.3563,170,336.5563,166.8,333.3563" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="165.2" x2="746.4" y1="333.3563" y2="333.3563"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="14.4" x="174.8" y="329.3035">10</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="66.4" x="192.4" y="329.3035">sipException</text><polygon fill="#A80036" points="48.4,353.4625,40.4,356.6625,48.4,359.8625,45.2,356.6625" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><line style="stroke:#A80036;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="43.6" x2="160.4" y1="356.6625" y2="356.6625"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="14.4" x="53.2" y="352.6098">11</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="66.4" x="70.8" y="352.6098">sipException</text><!--MD5=[020efc56a44b707f10c52935cfb6406f]
@startuml
'https://plantuml.com/sequence-diagram

autonumber

Client -> GoogleSatelliteImageService: getTile
GoogleSatelliteImageService -> SessionContextProvider: get google session token
SessionContextProvider - -> GoogleSatelliteImageService: token
GoogleSatelliteImageService -> GoogleMapsTileService: getTile
GoogleMapsTileService -> GoogleMapsTileService: call Google Api for tile
GoogleMapsTileService - -> GoogleSatelliteImageService: Google Api response = tile or error
alt Google Api respond with tile (status = OK)
    GoogleSatelliteImageService - -> Client: tile
else Google Api respond with error
    alt tile not found (status_code = 404)
        GoogleSatelliteImageService -> NoTileAreaService: cache not tile area
    end
    GoogleSatelliteImageService -> ExceptionUtils: map error from Google api to SipException
    ExceptionUtils - -> GoogleSatelliteImageService: sipException
    GoogleSatelliteImageService - -> Client: sipException
end

@enduml

@startuml

autonumber

Client -> GoogleSatelliteImageService: getTile
GoogleSatelliteImageService -> SessionContextProvider: get google session token
SessionContextProvider - -> GoogleSatelliteImageService: token
GoogleSatelliteImageService -> GoogleMapsTileService: getTile
GoogleMapsTileService -> GoogleMapsTileService: call Google Api for tile
GoogleMapsTileService - -> GoogleSatelliteImageService: Google Api response = tile or error
alt Google Api respond with tile (status = OK)
    GoogleSatelliteImageService - -> Client: tile
else Google Api respond with error
    alt tile not found (status_code = 404)
        GoogleSatelliteImageService -> NoTileAreaService: cache not tile area
    end
    GoogleSatelliteImageService -> ExceptionUtils: map error from Google api to SipException
    ExceptionUtils - -> GoogleSatelliteImageService: sipException
    GoogleSatelliteImageService - -> Client: sipException
end

@enduml

PlantUML version 1.2022.1(Tue Feb 01 19:19:58 CET 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>